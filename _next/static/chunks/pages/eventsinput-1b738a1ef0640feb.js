(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[469],{3733:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/eventsinput",function(){return n(7373)}])},4768:function(e,t,n){"use strict";n.d(t,{Vp:function(){return i},vU:function(){return a}});n(993);var r=n(5678),i=function(e){r.Am.success(e,{theme:"colored"})},a=function(e){r.Am.error(e,{theme:"colored"})}},7373:function(e,t,n){"use strict";n.r(t),n.d(t,{Eventsinput:function(){return Z},default:function(){return _}});var r=n(7568),i=n(4924),a=n(6042),s=n(9396);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=n(4051),u=n.n(l),d=n(5893),p=n(7294),m=n(9008),v=n.n(m),f=n(5051),h=n(3705),x=n(7536),j=n(2866),y=n(2130),g=n(4768),N=n(9669),E=n.n(N),w=function(){var e=(0,r.Z)(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new FormData).append("file",t),n.append("upload_preset","duyaochq"),e.next=6,E().post("https://api.cloudinary.com/v1_1/dpz3rs8ay/image/upload",n);case 6:return r=e.sent,e.abrupt("return",r.data.secure_url);case 10:e.prev=10,e.t0=e.catch(0),(0,g.vU)(e.t0.data.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),b=w,Z=function(){var e=(0,x.cI)(),t=e.register,n=e.formState.errors,c=(e.handleSubmit,(0,p.useContext)(y.Z)),l=c.newEventLoading,m=c.setNewEventLoading,N=(0,p.useState)([]),w=N[0],Z=N[1],_=(0,p.useState)([]),I=_[0],A=_[1],k=(0,p.useState)([]),C=k[0],S=k[1],q=(0,p.useState)([]),B=q[0],H=q[1],P=(0,p.useState)([]),T=P[0],L=P[1],M=(0,p.useState)(!1),O=M[0],U=M[1],D=(0,p.useState)([]),V=(D[0],D[1],(0,p.useState)(null)),z=(V[0],V[1],(0,p.useState)({name:"",image:[],event_programme:[],time:"",date:"",location:"",event_type:"Private",event_fee:0,tags:[],menu:[],additional_activities:[]})),J=z[0],Y=z[1];console.log("newEvent",J);var Q=function(e){e.persist(),Y((function(t){return(0,s.Z)((0,a.Z)({},t),(0,i.Z)({},e.target.name,e.target.value))}))},X=(function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.persist(),n=document.getElementById("event_programme"),Z(o(w).concat([n.value]))}catch(r){console.log("\ud83d\ude80 ~ file: eventsinput.tsx ~ line 74 ~ eventProgrammeHandler ~ error",r)}case 1:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.persist(),n=document.getElementById("tags"),A(o(I).concat([n.value]))}catch(r){console.log("\ud83d\ude80 ~ file: eventsinput.tsx ~ line 96 ~ eventTagsHandler ~ error",r)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.persist(),n=document.getElementById("menu"),S(o(C).concat([n.value]))}catch(r){console.log("\ud83d\ude80 ~ file: eventsinput.tsx ~ line 107 ~ eventMenuHandler ~ error",r)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=(0,r.Z)(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),t.persist(),n=document.getElementById("image"),e.next=6,b(n.files[0]);case 6:r=e.sent,L(o(T).concat([r])),m(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),m(!1),console.log("\ud83d\ude80 ~ file: eventsinput.tsx ~ line 127 ~ onMediaChangeHandler ~ error",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("newEvent: ",J),e.prev=2,m(!0),e.next=6,E().post("https://event-manager001.herokuapp.com/api/v1/event/create",J,{headers:{"content-type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYzNmU3NmEyYjViOWQzNWZmMmU4MjhjMiIsImlhdCI6MTY2ODE4NDIwNCwiZXhwIjoxNjY4MjcwNjA0fQ.HvYaem-OuE3PgHBJB9LDH6s8RLQQZqzTdykoLE17fbw"}});case 6:n=e.sent,console.log("\ud83d\ude80 ~ file: eventsinput.tsx ~ line 60 ~ submit ~ response",n),m(!1),201===n.status&&(0,g.Vp)(n.data.msg),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(2),(0,g.vU)("Couldn't create event"),console.log(e.t0),m(!1);case 17:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return(0,p.useEffect)((function(){Y((function(e){return(0,s.Z)((0,a.Z)({},e),{event_programme:w})}))}),[w]),(0,p.useEffect)((function(){Y((function(e){return(0,s.Z)((0,a.Z)({},e),{tags:I})}))}),[I]),(0,p.useEffect)((function(){Y((function(e){return(0,s.Z)((0,a.Z)({},e),{menu:C})}))}),[C]),(0,p.useEffect)((function(){Y((function(e){return(0,s.Z)((0,a.Z)({},e),{additional_activities:B})}))}),[B]),(0,p.useEffect)((function(){Y((function(e){return(0,s.Z)((0,a.Z)({},e),{image:T})}))}),[T]),(0,p.useEffect)((function(){U(!O)}),[J.image]),(0,d.jsxs)("div",{children:[(0,d.jsxs)(v(),{children:[(0,d.jsx)("title",{children:"Hostout"}),(0,d.jsx)("meta",{name:"description",content:"Host and find events near you"}),(0,d.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,d.jsx)(f.Z,{}),(0,d.jsx)("form",{onSubmit:F,children:(0,d.jsxs)("div",{className:"form-input",children:[(0,d.jsx)("div",{id:"About-event",children:(0,d.jsx)("h2",{children:"Host an event"})}),(0,d.jsxs)("div",{className:"form-event",children:[(0,d.jsxs)("div",{className:"form-event-title",children:[(0,d.jsx)("h3",{children:"Name*"}),(0,d.jsx)("input",{type:"text",placeholder:"Enter Event Name",id:"name",name:"name",className:"form-event-input",style:{width:"100%"},onChange:Q,required:!0,defaultValue:J.name})]}),(0,d.jsxs)("div",{className:"form-event-title",children:[(0,d.jsx)("h3",{children:"Date*"}),(0,d.jsx)("input",(0,s.Z)((0,a.Z)({},t("enterEventName",{required:"Input event name."})),{type:"date",placeholder:"Enter Event Title",id:"eventName",className:"form-event-input",style:{width:"100%",paddingRight:"2%"}})),(0,d.jsx)(j.B,{errors:n,name:"enterEvent",render:function(e){var t=e.message;return(0,d.jsx)("p",{className:"formError",children:t})}})]}),(0,d.jsxs)("div",{className:"form-event-title",children:[(0,d.jsx)("h3",{children:"Location*"}),(0,d.jsx)("input",(0,s.Z)((0,a.Z)({},t("enterEventName",{required:"Input event name."})),{type:"text",placeholder:"Enter Event Location",id:"eventName",className:"form-event-input",style:{width:"100%"}})),(0,d.jsx)(j.B,{errors:n,name:"enterEvent",render:function(e){var t=e.message;return(0,d.jsx)("p",{className:"formError",children:t})}})]}),(0,d.jsxs)("div",{className:"form-event-title",children:[(0,d.jsx)("h3",{children:"Program*"}),(0,d.jsx)("input",(0,s.Z)((0,a.Z)({},t("enterEventName",{required:"Input event name."})),{type:"text",placeholder:"Enter Event Program",id:"eventName",className:"form-event-input",style:{width:"100%"}})),(0,d.jsx)(j.B,{errors:n,name:"enterEvent",render:function(e){var t=e.message;return(0,d.jsx)("p",{className:"formError",children:t})}})]}),(0,d.jsxs)("div",{className:"input-container",children:[(0,d.jsxs)("div",{className:"form-event-category",children:[(0,d.jsx)("h3",{children:"Type*"}),(0,d.jsxs)("select",{name:"event_type",id:"event_type",required:!0,defaultValue:J.event_type,children:[(0,d.jsx)("option",{value:"",children:"Select event type"}),(0,d.jsx)("option",{value:"private",children:"Private"}),(0,d.jsx)("option",{value:"public",children:"Public"})]})]}),(0,d.jsxs)("div",{className:"form-event-price",children:[(0,d.jsx)("h3",{children:"Price"}),(0,d.jsx)("input",{type:"number",placeholder:"Amount",id:"event_fee",name:"event_fee",className:"form-event-input",onChange:Q,required:!0,defaultValue:J.event_fee})]})]}),(0,d.jsxs)("div",{className:"person-container-info",children:[(0,d.jsx)("h3",{children:"Add tags to the event"}),(0,d.jsxs)("div",{className:"person-name-info",children:[(0,d.jsx)("input",{type:"text",placeholder:"Enter tag name",id:"tags",name:"tags",style:{width:"83%"},className:"form-event-input",required:!0}),(0,d.jsx)("button",{onClick:X,children:"Add tag"}),(0,d.jsx)("br",{}),(0,d.jsx)("ul",{style:{display:"flex",flexWrap:"wrap",width:"100%"},children:I.map((function(e,t){return(0,d.jsxs)("li",{style:{marginLeft:"5%",listStyleType:"none"},children:["#",e]},t)}))})]})]}),(0,d.jsxs)("div",{className:"person-container-info",children:[(0,d.jsx)("h3",{children:"Add to event menu"}),(0,d.jsxs)("div",{className:"person-name-info-2",children:[(0,d.jsx)("input",{type:"text",placeholder:"Enter menu item name",id:"tags",name:"tags",className:"form-event-input",required:!0}),(0,d.jsx)("button",{onClick:R,children:"Add to menu"}),(0,d.jsx)("br",{}),(0,d.jsx)("ul",{children:C.map((function(e,t){return(0,d.jsx)("li",{children:e},t)}))})]})]}),(0,d.jsxs)("div",{className:"person-container-info",children:[(0,d.jsx)("h3",{children:"Add the availabe lists of activities"}),(0,d.jsxs)("div",{className:"input-act-menu",children:[(0,d.jsxs)("div",{className:"set",children:[(0,d.jsx)("span",{children:"Activity name"}),(0,d.jsx)("input",{type:"text",placeholder:"Enter activity here",id:"activity_name",name:"activity_name",required:!0})]}),(0,d.jsxs)("div",{className:"set",children:[(0,d.jsx)("span",{children:"Description"}),(0,d.jsx)("input",{type:"textarea",placeholder:"enter description",id:"description",name:"description",required:!0})]}),(0,d.jsxs)("div",{className:"set",children:[(0,d.jsx)("span",{children:"Amount"}),(0,d.jsx)("input",{type:"text",placeholder:"enter price",id:"price",name:"price",required:!0})]}),(0,d.jsx)("div",{className:"button",children:(0,d.jsx)("button",{onClick:function(e){try{e.persist();var t=document.getElementById("activity_name"),n=document.getElementById("description"),r=document.getElementById("price"),i={activity_name:t.value,description:n.value,price:r.value};H(o(B).concat([i]))}catch(a){console.log("onActivitiesChangeHandler ~ error",a)}},children:"Add activity"})})]})]}),(0,d.jsxs)("div",{className:"input-events-image",children:[(0,d.jsx)("h3",{children:"Upload images and flyers"}),(0,d.jsxs)("div",{className:"upload",children:[(0,d.jsx)("input",{type:"file",placeholder:"insert flyer / image",id:"image",name:"image",multiple:!0,required:!0}),(0,d.jsx)("button",{onClick:W,children:"Add Image"})]}),(0,d.jsx)("br",{}),(0,d.jsx)("ul",{children:T.map((function(e,t){return(0,d.jsx)("li",{children:e.split("image")[1]},t)}))})]}),(0,d.jsx)("div",{id:"input-event-btn",children:l?"":(0,d.jsx)("button",{className:"input-event-button",type:"submit",style:{width:"100%"},children:"Create Event"})})]})]})}),(0,d.jsx)(h.Z,{})]})},_=Z}},function(e){e.O(0,[976,112,664,675,940,372,446,657,774,888,179],(function(){return t=3733,e(e.s=t);var t}));var t=e.O();_N_E=t}]);